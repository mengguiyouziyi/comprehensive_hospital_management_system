# 综合医院管理系统部署指南

## 1. 概述

### 1.1 文档目的
本文档旨在为系统管理员提供综合医院管理系统完整的部署指南，包括环境要求、安装步骤、配置说明和常见问题解决方案。

### 1.2 适用范围
适用于综合医院管理系统在生产环境、测试环境和开发环境的部署。

### 1.3 系统架构
```
┌─────────────────────────────────────────────────────────────┐
│                    Load Balancer/Nginx                      │
└─────────────────────────┬───────────────────────────────────┘
                          │
        ┌─────────────────┼────────────────────────────────────────────┐
        │                 │                                            │
┌───────▼──────┐  ┌───────▼──────┐  ┌─────────────────────────────────▼─────────────────────────────────┐
│  Web Client  │  │ Mobile App   │  │ API Clients                                                     │
│  (React)     │  │ (React       │  │                                                                     │
│              │  │ Native)      │  │                                                                     │
└───────┬──────┘  └───────┬──────┘  └─────────────────────────────────┬─────────────────────────────────┘
        │                 │                                           │
        └─────────────────┼───────────────────────────────────────────┘
                          │
              ┌───────────▼───────────┐
              │     API Gateway       │
              │ (Node.js/Java)        │
              └───────────┬───────────┘
                          │
        ┌─────────────────┼──────────────────────────────────────────────────────────────────────────┐
        │                 │                                                                          │
┌───────▼──────┐  ┌───────▼──────┐  ┌───────────────────────────────────────────────────────────────▼────────────────────────────────────────┐
│  Business    │  │   Database   │  │ Third-party Services                                                                             │
│  Services    │  │   (MySQL     │  │                                                                                                  │
│              │  │   Redis      │  │                                                                                                  │
│              │  │   MongoDB)   │  │                                                                                                  │
└──────────────┘  └──────────────┘  └───────────────────────────────────────────────────────────────────────────────────────────────────────┘
        │                 │                                                                          │
        │        ┌────────▼────────┐        ┌─────────────────────────────────────────────────────────▼──────────────────────────────────────┐
        │        │ Cache (Redis)   │        │ Notification Service                                                                       │
        │        └─────────────────┘        │ (Email/SMS/Push)                                                                           │
        │                 │                 └───────────────────────────────────────────────────────────────────────────────────────────────┘
        │        ┌────────▼────────┐                                                                                                       │
        │        │ Message Queue   │        ┌───────────────────────────────────────────────────────────────────────────────────────────────┐
        │        │ (RabbitMQ/      │        │ File Storage Service                                                                      │
        │        │ Kafka)          │        │ (Local/Cloud Storage)                                                                     │
        │        └─────────────────┘        └───────────────────────────────────────────────────────────────────────────────────────────────┘
        │                 │
        └─────────────────┼─────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
                          │                                                                                                           │
              ┌───────────▼───────────┐                                                                                     ┌───────────▼───────────┐
              │    Microservices      │                                                                                     │   Analytics Engine    │
              │                       │                                                                                     │ (Elasticsearch/Kibana)│
              │ ├── Asset Management  │                                                                                     └───────────────────────┘
              │ ├── Training & Exam   │
              │ ├── Adverse Events    │
              │ ├── Disposal System   │
              │ ├── Inspection System │
              │ ├── Repair System     │
              │ ├── QC System         │
              │ ├── Inventory System  │
              │ └── ...               │
              └───────────────────────┘
```

## 2. 环境要求

### 2.1 服务器要求
#### 最低配置（单机部署）
- CPU: 8核
- 内存: 16GB
- 硬盘: 200GB SSD
- 带宽: 100Mbps

#### 推荐配置（集群部署）
- API网关服务器: 4核CPU, 8GB内存
- 微服务服务器: 8核CPU, 16GB内存（每个服务节点）
- 数据库服务器: 8核CPU, 32GB内存
- 缓存服务器: 4核CPU, 8GB内存
- 消息队列服务器: 4核CPU, 8GB内存
- 文件存储服务器: 根据实际需求配置
- 总硬盘空间: 1TB SSD（可根据数据量调整）

### 2.2 操作系统
- CentOS 7.6+
- Ubuntu 18.04+
- Red Hat Enterprise Linux 7.6+

### 2.3 软件依赖
| 软件 | 版本 | 用途 |
|------|------|------|
| Node.js | 16.x+ | 后端服务运行环境 |
| Java | 11+ | 部分后端服务 |
| MySQL | 8.0+ | 主数据库 |
| Redis | 6.0+ | 缓存数据库 |
| MongoDB | 5.0+ | 文档数据库 |
| Elasticsearch | 7.0+ | 搜索引擎 |
| Nginx | 1.18+ | 反向代理服务器 |
| RabbitMQ | 3.8+ | 消息队列 |
| Docker | 20.10+ | 容器化部署 |
| Docker Compose | 1.29+ | 容器编排 |
| Kubernetes | 1.20+ | 容器编排（生产环境） |

## 3. 部署方式

### 3.1 容器化部署（推荐）

#### 3.1.1 环境准备
1. 安装Docker和Docker Compose
```bash
# CentOS/RHEL
sudo yum install -y docker docker-compose

# Ubuntu/Debian
sudo apt update
sudo apt install -y docker.io docker-compose

# 启动Docker服务
sudo systemctl start docker
sudo systemctl enable docker
```

2. 配置Docker镜像加速（可选）
```bash
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <